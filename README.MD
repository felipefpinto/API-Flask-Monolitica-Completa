# API Flask - Monol√≠tica Completa

![Python](https://img.shields.io/badge/Python-3.9%2B-blue?style=for-the-badge&logo=python)
![Flask](https://img.shields.io/badge/Flask-3.1.2-black?style=for-the-badge&logo=flask)
![SQLAlchemy](https://img.shields.io/badge/SQLAlchemy-2.0.43-orange?style=for-the-badge&logo=sqlalchemy)
![SQLite](https://img.shields.io/badge/SQLite-database-0769AD?style=for-the-badge&logo=sqlite)
![Flasgger](https://img.shields.io/badge/Flasgger-0.9.7.1-purple?style=for-the-badge)
![Docker](https://img.shields.io/badge/Docker-Enabled-blue?style=for-the-badge&logo=docker)

## Descri√ß√£o

Este projeto √© uma API RESTful monol√≠tica completa desenvolvida com Flask, Python e SQLAlchemy. Ele foi projetado para gerenciar informa√ß√µes de uma institui√ß√£o de ensino, incluindo professores, turmas e alunos. A API oferece endpoints para opera√ß√µes CRUD (Criar, Ler, Atualizar, Deletar) para cada uma dessas entidades, com valida√ß√µes e relacionamentos entre elas.

## üë®‚Äçüíª Criadores

- [Felipe Fernandes Pinto](https://github.com/felipefpinto / https://www.linkedin.com/in/felipe-fernandes-pinto-39b311129/)  
- [Maria Oliveira](https://github.com/biancalmds / https://www.linkedin.com/in/biancalmds/)  

**Principais Caracter√≠sticas:**

*   **Gerenciamento de Professores**: Crie, liste, visualize, atualize e exclua professores, incluindo informa√ß√µes como nome, idade, mat√©ria e observa√ß√µes.
*   **Gerenciamento de Turmas**: Crie, liste, visualize, atualize e exclua turmas, associando-as a um professor e definindo seu status (ativo/inativo).
*   **Gerenciamento de Alunos**: Crie, liste, visualize, atualize e exclua alunos, associando-os a uma turma e registrando dados como data de nascimento, notas semestrais e m√©dia final. A idade do aluno √© calculada automaticamente com base na data de nascimento.
*   **Banco de Dados SQLite**: Utiliza SQLite como banco de dados, ideal para desenvolvimento e prototipagem r√°pida.
*   **Valida√ß√£o de Chaves Estrangeiras**: Configura√ß√£o para garantir a integridade referencial no SQLite.
*   **Estrutura Modular**: Organiza√ß√£o do c√≥digo em blueprints para controllers, modelos e helpers, facilitando a manuten√ß√£o e escalabilidade.
*   **Documenta√ß√£o de API (Flasgger)**: Preparado para integra√ß√£o com Flasgger para gera√ß√£o autom√°tica de documenta√ß√£o Swagger/OpenAPI.

## Instala√ß√£o

Siga os passos abaixo para configurar e executar o projeto localmente.

### Pr√©-requisitos

*   Python 3.9+
*   `pip` (gerenciador de pacotes do Python)

### Passos para Instala√ß√£o

1.  **Clone o reposit√≥rio**:
    ```bash
    git clone https://github.com/seu-usuario/API-Flask-Monolitica-Completa.git
    cd API-Flask-Monolitica-Completa
    ```

2.  **Crie e ative um ambiente virtual (recomendado)**:
    ```bash
    python -m venv venv
    # No Windows
    .\venv\Scripts\activate
    # No macOS/Linux
    source venv/bin/activate
    ```

3.  **Instale as depend√™ncias**:
    ```bash
    pip install -r requirements.txt
    ```
    As depend√™ncias incluem:
    *   `flasgger==0.9.7.1`
    *   `Flask==3.1.2`
    *   `flask_sqlalchemy==3.1.1`
    *   `SQLAlchemy==2.0.43`

4.  **Inicialize o banco de dados**:
    As tabelas do banco de dados ser√£o criadas automaticamente na primeira execu√ß√£o da aplica√ß√£o, gra√ßas ao `db.create_all()` no `app.py`.

## Uso

Para iniciar a aplica√ß√£o, execute o arquivo `app.py`:

```bash
python app.py
```

A API estar√° dispon√≠vel em `http://127.0.0.1:5000` (ou outra porta se configurada).

## üê≥ Rodando com Docker localmente

### 1. Build da imagem

```bash
docker build -t minha-api .
```

### 2. Rodar o container

```bash
docker run -p 5000:5000 minha-api
```

---

### Endpoints da API

A API √© organizada em torno de tr√™s entidades principais: `professores`, `turmas` e `alunos`.

#### Professores (`/professores`)

*   **`POST /professores`**: Cria um novo professor.
    *   **Corpo da Requisi√ß√£o (JSON)**:
        ```json
        {
            "nome": "Nome do Professor",
            "idade": 45,
            "materia": "Matem√°tica",
            "obs": "Professor experiente em c√°lculo."
        }
        ```
    *   **Resposta**: `{"mensagem": "Professor criado com sucesso!"}` (201)
*   **`GET /professores`**: Lista todos os professores.
    *   **Resposta**: `{"professores": [...], "total_professores": N}` (200)
*   **`GET /professores/<int:id_professor>`**: Retorna os detalhes de um professor espec√≠fico.
    *   **Resposta**: `{"mensagem": "Professor encontrado com sucesso!", "dados_professor": {...}}` (200) ou `{"mensagem": "Professor n√£o encontrado"}` (404)
*   **`PUT /professores/<int:id_professor>`**: Atualiza os dados de um professor.
    *   **Corpo da Requisi√ß√£o (JSON)**:
        ```json
        {
            "nome": "Novo Nome",
            "materia": "F√≠sica"
        }
        ```
    *   **Resposta**: `{"mensagem": "Dados do professor atualizados com sucesso!"}` (200) ou `{"mensagem": "Professor n√£o encontrado"}` (404)
*   **`DELETE /professores/<int:id_professor>`**: Exclui um professor.
    *   **Resposta**: `{"mensagem": "Professor exclu√≠do com sucesso"}` (200) ou `{"mensagem": "Professor n√£o encontrado"}` (404)
    *   **Erro**: `{"mensagem": "N√£o √© poss√≠vel excluir o professor, pois ele est√° associado a uma turma."}` (500) se houver turmas associadas.

#### Turmas (`/turmas`)

*   **`POST /turmas`**: Cria uma nova turma.
    *   **Corpo da Requisi√ß√£o (JSON)**:
        ```json
        {
            "nome": "Turma A - 2024",
            "professor_id": 1,
            "ativo": true
        }
        ```
    *   **Resposta**: `{"mensagem": "Turma criada com sucesso!"}` (201)
    *   **Erro**: `{"erro": "Professor n√£o encontrado. Verifique o professor_id."}` (500) se o `professor_id` n√£o existir.
*   **`GET /turmas`**: Lista todas as turmas.
    *   **Resposta**: `{"turmas": [...], "total_turmas": N}` (200)
*   **`GET /turmas/<int:id_turma>`**: Retorna os detalhes de uma turma espec√≠fica.
    *   **Resposta**: `{"mensagem": "Turma encontrada com sucesso!", "dados_turma": {...}}` (200) ou `{"mensagem": "Turma n√£o encontrada."}` (404)
*   **`PUT /turmas/<int:id_turma>`**: Atualiza os dados de uma turma.
    *   **Corpo da Requisi√ß√£o (JSON)**:
        ```json
        {
            "nome": "Turma B - 2024",
            "ativo": false
        }
        ```
    *   **Resposta**: `{"mensagem": "Turma atualizada com sucesso!"}` (200) ou `{"mensagem": "Turma n√£o encontrada."}` (404)
*   **`DELETE /turmas/<int:id_turma>`**: Exclui uma turma.
    *   **Resposta**: `{"mensagem": "Turma deletada com sucesso!"}` (200) ou `{"mensagem": "Turma n√£o encontrada."}` (404)

#### Alunos (`/alunos`)

*   **`POST /alunos`**: Cria um novo aluno.
    *   **Corpo da Requisi√ß√£o (JSON)**:
        ```json
        {
            "nome": "Jo√£o Silva",
            "data_nascimento": "2008-05-15",
            "turma_id": 1,
            "nota_primeiro_semestre": 8.5,
            "nota_segundo_semestre": 7.0
        }
        ```
    *   **Observa√ß√µes**:
        *   `idade` √© calculada automaticamente.
        *   `media_final` √© calculada automaticamente se ambas as notas forem fornecidas.
        *   `data_nascimento` aceita formatos como "YYYY-MM-DD", "YYYY/MM/DD", "DD-MM-YYYY", "DD/MM/YYYY".
    *   **Resposta**: `{"mensagem": "Aluno criado com sucesso!"}` (201)
    *   **Erro**: `{"erro": "Turma n√£o encontrada. Verifique o turma_id."}` (500) se o `turma_id` n√£o existir.
*   **`GET /alunos`**: Lista todos os alunos.
    *   **Resposta**: `{"alunos": [...], "total_alunos": N}` (200)
*   **`GET /alunos/<int:id_aluno>`**: Retorna os detalhes de um aluno espec√≠fico.
    *   **Resposta**: `{"mensagem": "Aluno encontrado com sucesso!", "dados_aluno": {...}}` (200) ou `{"mensagem": "Aluno n√£o encontrado."}` (404)
*   **`PUT /alunos/<int:id_aluno>`**: Atualiza os dados de um aluno.
    *   **Corpo da Requisi√ß√£o (JSON)**:
        ```json
        {
            "nome": "Jo√£o Pedro Silva",
            "nota_primeiro_semestre": 9.0
        }
        ```
    *   **Resposta**: `{"mensagem": "Aluno atualizado com sucesso!"}` (200) ou `{"mensagem": "Aluno n√£o encontrado."}` (404)
*   **`DELETE /alunos/<int:id_aluno>`**: Exclui um aluno.
    *   **Resposta**: `{"mensagem": "Aluno deletado com sucesso!"}` (200) ou `{"mensagem": "Aluno n√£o encontrado."}` (404)


## Estrutura do Projeto

```
API Flask - Monolitica Completa/
‚îú‚îÄ‚îÄ app.py                      # Ponto de entrada da aplica√ß√£o Flask
‚îú‚îÄ‚îÄ config.py                   # Configura√ß√µes da aplica√ß√£o e do banco de dados
‚îú‚îÄ‚îÄ requirements.txt            # Depend√™ncias do projeto
‚îú‚îÄ‚îÄ controllers/                # L√≥gica de neg√≥cio e rotas da API
‚îÇ   ‚îú‚îÄ‚îÄ aluno_control.py        # Endpoints para Alunos
‚îÇ   ‚îú‚îÄ‚îÄ professor_control.py    # Endpoints para Professores
‚îÇ   ‚îî‚îÄ‚îÄ turma_control.py        # Endpoints para Turmas
‚îú‚îÄ‚îÄ helpers/                    # Fun√ß√µes auxiliares
‚îÇ   ‚îú‚îÄ‚îÄ age_calculator.py       # Calcula a idade a partir da data de nascimento
‚îÇ   ‚îî‚îÄ‚îÄ date_converter.py       # Converte strings para objetos de data
‚îú‚îÄ‚îÄ models/                     # Defini√ß√µes dos modelos do banco de dados (SQLAlchemy)
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py             # Inicializa o objeto SQLAlchemy
‚îÇ   ‚îú‚îÄ‚îÄ aluno.py                # Modelo Aluno
‚îÇ   ‚îú‚îÄ‚îÄ professor.py            # Modelo Professor
‚îÇ   ‚îî‚îÄ‚îÄ turma.py                # Modelo Turma
‚îú‚îÄ‚îÄ instance/                   # Pasta para arquivos de inst√¢ncia (ex: database.db)
|   ‚îî‚îÄ‚îÄ database.db             # Banco de dados SQLite
‚îú‚îÄ‚îÄ Dockerfile                  # Configura√ß√£o do container Docker
‚îú‚îÄ‚îÄ README.MD                   # Documenta√ß√£o do projeto
|__ static
    ‚îî‚îÄ‚îÄdoc
        ‚îî‚îÄ‚îÄ doc_swagger.yaml    # Especifica√ß√£o Swagger/OpenAPI


```